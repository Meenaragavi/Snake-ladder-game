!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=io.connect("http://localhost:3000");t.emit("joined");var n,o=[],i=document.getElementById("canvas");i.width=.9*document.documentElement.clientHeight,i.height=.9*document.documentElement.clientHeight;var r=i.getContext("2d"),d=i.width/10,c=d/2,a=d/2+20,l=["../images/red_piece.png","../images/blue_piece.png","../images/yellow_piece.png","../images/green_piece.png"],m=[[2,23],[4,68],[6,45],[20,59],[30,96],[52,72],[57,96],[71,92]],u=[[98,40],[84,58],[87,49],[73,15],[56,8],[50,5],[43,17]],s=function(){function t(e,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.name=n,this.pos=o,this.img=i}var n,o,l;return n=t,(o=[{key:"draw",value:function(){var e=Math.floor(this.pos/10)%2==0?this.pos%10*d-15+c:i.width-(this.pos%10*d+c+15),t=i.height-(Math.floor(this.pos/10)*d+a),n=new Image;n.src=this.img,r.drawImage(n,e,t,30,40)}},{key:"updatePos",value:function(e){this.pos+e<=99&&(this.pos+=e,this.pos=this.isLadderOrSnake(this.pos+1)-1)}},{key:"isLadderOrSnake",value:function(e){for(var t=e,n=0;n<m.length;n++)if(m[n][0]==e){t=m[n][1];break}for(var o=0;o<u.length;o++)if(u[o][0]==e){t=u[o][1];break}return t}}])&&e(n.prototype,o),l&&e(n,l),Object.defineProperty(n,"prototype",{writable:!1}),t}();function g(){r.clearRect(0,0,i.width,i.height),o.forEach((function(e){e.draw()}))}document.getElementById("start-btn").addEventListener("click",(function(){var e=document.getElementById("name").value;document.getElementById("name").disabled=!0,document.getElementById("start-btn").hidden=!0,document.getElementById("roll-button").hidden=!1,n=new s(o.length,e,0,l[o.length]),document.getElementById("current-player").innerHTML="<p>Anyone can roll</p>",t.emit("join",n)})),document.getElementById("roll-button").addEventListener("click",(function(){var e=Math.ceil(6*Math.random());n.updatePos(e),t.emit("rollDice",{num:e,id:n.id,pos:n.pos})})),t.on("join",(function(e){o.push(new s(o.length,e.name,e.pos,e.img)),g(),document.getElementById("players-table").innerHTML+="<tr><td>".concat(e.name,"</td><td><img src=").concat(e.img," height=50 width=40></td></tr>")})),t.on("joined",(function(e){e.forEach((function(e,t){o.push(new s(t,e.name,e.pos,e.img)),console.log(e),document.getElementById("players-table").innerHTML+="<tr><td>".concat(e.name,"</td><td><img src=").concat(e.img,"></td></tr>")})),g()})),t.on("rollDice",(function(e,t){var i;o[e.id].updatePos(e.num),document.getElementById("dice").src="./images/dice/dice".concat(e.num,".png"),g(),t!=n.id?(document.getElementById("roll-button").hidden=!0,document.getElementById("current-player").innerHTML="<p>It's ".concat(o[t].name,"'s turn</p>")):(document.getElementById("roll-button").hidden=!1,document.getElementById("current-player").innerHTML="<p>It's your turn</p>");for(var r=0;r<o.length;r++)if(99==o[r].pos){i=o[r];break}i&&(document.getElementById("current-player").innerHTML="<p>".concat(i.name," has won!</p>"),document.getElementById("roll-button").hidden=!0,document.getElementById("dice").hidden=!0,document.getElementById("restart-btn").hidden=!1)})),document.getElementById("restart-btn").addEventListener("click",(function(){t.emit("restart")})),t.on("restart",(function(){window.location.reload()}))}();
//# sourceMappingURL=main.223baa3d.js.map